tinymce.PluginManager.add("importcss",function(e){function t(t){function n(e){a[e.href]&&(i(e.imports,n),i(e.cssRules||e.rules,function(e){e.styleSheet?n(e.styleSheet):e.selectorText&&i(e.selectorText.split(","),function(e){o.push(tinymce.trim(e))})}))}var o=[],a={};i(e.contentCSS,function(e){a[e]=!0});try{i(t.styleSheets,n)}catch(r){}return o}function n(t){var n,i=/(?:([\w\-]+))?(\.[\w\-\.]+)/.exec(t);if(i){var o=i[1],a=i[2].substr(1).split(".").join(" ");return i[1]?(n={title:t},e.schema.getTextBlockElements()[o]?n.block=o:e.schema.getBlockElements()[o]?n.selector=o:n.inline=o):i[2]&&(n={inline:"span",title:t.substr(1),classes:a}),e.settings.importcss_merge_classes!==!1?n.classes=a:n.attributes={"class":a},n}}var i=tinymce.each;e.settings.style_formats||(e.settings.importcss_append||(e.settings.style_formats={}),e.on("renderFormatsMenu",function(o){var a=e.settings.importcss_selector_converter||n;i(t(e.getDoc()),function(t){if(-1===t.indexOf(".mce-")){var n=a(t);if(n){var i=n.name||tinymce.DOM.uniqueId();e.formatter.register(i,n),o.control.append(tinymce.extend({},o.control.settings.itemDefaults,{text:n.title,format:i}))}}})}))});