 tinymce.create('tinymce.plugins.MailToPlugin', {

  init : function(ed, url) {
   ed.addCommand('mceMailTo', function() {
    var linkText = ed.selection.getContent({format : 'text'});
    var newText = "<a href='mailto: "+ linkText +"'>" + linkText + "</a>";
    ed.execCommand('mceInsertContent', false, newText);
   });

   // Register example button
   ed.addButton('mailto', {
    title : 'MailTo',
    cmd : 'mceMailTo',
    image : url + '/img/mailto.png'
   });
  }
 });

 // Register plugin with a short name
 tinymce.PluginManager.add('mailto', tinymce.plugins.MailToPlugin);